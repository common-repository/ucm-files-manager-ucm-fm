/*! Ultimate Media On The Cloud | (c) PhpRockets Team | File Manager */
phpR_UCM.fm={force_reload:0,setForceReload:function(e){this.force_reload=e},getForceReload:function(){return this.force_reload},account:{switchStorage:function(){if(0===parseInt(jQuery("#ucm-fm-storage-type").val()))window.location.href=phprockets_ucm_fm.ucm_fm_url;else{var e=jQuery("#ucm-fm-account-id").val(),t=jQuery("#ucm-fm-bucket").val();if(!t)return void phpR_UCM.toast.show("error",phpR_UCM.l10n._e("fm","_missing_bucket"));window.location.href=phprockets_ucm_fm.ucm_fm_url+"&account="+e+"&bucket="+t}},reloadBuckets:function(e){phpR_UCM.toast.hide(),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_ucm_fm.reloadBuckets,type:"POST",dataType:"json",data:{account_id:e},timeout:36e3,success:function(e){e.success?jQuery("#ucm-fm-bucket").html(e.data.html):(phpR_UCM.toast.show("error",e.data.message),jQuery("#ucm-fm-bucket").html("")),phpR_UCM.hideLoading()},error:function(e,t,o){phpR_UCM.toast.show("error",o),jQuery("#ucm-fm-bucket").html(""),phpR_UCM.hideLoading()}})},storageChange:function(e){var t=jQuery(".ucm-field-hidden");0===parseInt(e)?(t.css("display","none"),t.next(".ucm-helptext").hide()):(t.css("display","flex"),t.next(".ucm-helptext").show())},uploadAcl:function(t,e,o,s,a){phpR_UCM.toast.hide(),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_ucm_fm.updateFileAcl,type:"POST",dataType:"json",data:{account_id:o,bucket:s,type:a,files:e},timeout:36e3,success:function(e){e.success?(phpR_UCM.toast.show("success",e.data.message),phpR_UCM.fm.setForceReload(1),t.exec("reload")):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,t,o){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error",o)}})}},bindSideFolderOpen:function(e,t){var o=window.location.href;if(0<=o.search("bucket")){var s=t.path(e);if(0<=s.search("/"))var a=(s=s.split("/"))[0];else a=s;var c=o.split("bucket=");a!==c[1]&&(c=c[0]+"bucket="+a,window.location.href=c)}},wp:{importMedias:function(e){phpR_UCM.toast.hide(),phpR_UCM.showLoading(),jQuery.ajax({url:phprockets_ucm_fm.importUploadMedias,type:"POST",dataType:"json",data:{files:e},timeout:36e3,success:function(e){e.success?phpR_UCM.toast.show("success",e.data.message):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,t,o){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error",o)}})}},saveSettings:function(e,t){phpR_UCM.toast.hide(),phpR_UCM.showLoading(),jQuery.ajax({url:t,type:"POST",dataType:"json",data:e.serialize(),timeout:36e3,success:function(e){e.success?phpR_UCM.toast.show("success",e.data.message):phpR_UCM.toast.show("error",e.data.message),phpR_UCM.hideLoading()},error:function(e,t,o){phpR_UCM.hideLoading(),phpR_UCM.toast.show("error",o)}})},uiChange:function(e){jQuery(".ucm-fm-ui-preview").hide(),jQuery(".ucm-fm-ui-preview#fm-ui-"+e).show()}};